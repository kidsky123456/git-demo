åœ¨ Git ä¸­æ’¤é”€ commit ä½†ä¿ç•™ä»£ç ä¿®æ”¹çš„å®Œæ•´è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š

# 1. **æ’¤é”€æœ€è¿‘ä¸€æ¬¡ commitï¼Œä¿ç•™ä¿®æ”¹åˆ°å·¥ä½œåŒºï¼ˆæœ€å¸¸ç”¨ï¼‰**
```bash
# æ’¤é”€ commit ä½†ä¿ç•™æ‰€æœ‰ä»£ç ä¿®æ”¹ï¼ˆå›åˆ°æœªæš‚å­˜çŠ¶æ€ï¼‰
git reset --soft HEAD~1
```
- æ•ˆæœï¼šä»£ç ä¿®æ”¹ä¿ç•™åœ¨å·¥ä½œç›®å½•ï¼Œcommit è¢«æ’¤é”€
- ä½¿ç”¨åœºæ™¯ï¼šé‡æ–°ä¿®æ”¹åå†æ¬¡æäº¤

# 2. **æ’¤é”€ commit ä½†ä¿ç•™ä¿®æ”¹åˆ°æš‚å­˜åŒº**
```bash
# æ’¤é”€ commit ä½†ä¿ç•™ä¿®æ”¹åˆ°æš‚å­˜åŒºï¼ˆç›¸å½“äºå·² git add çš„çŠ¶æ€ï¼‰
git reset --mixed HEAD~1  # --mixed æ˜¯é»˜è®¤å‚æ•°ï¼Œå¯çœç•¥
```
- æ•ˆæœï¼šä»£ç ä¿®æ”¹ä¿ç•™åœ¨æš‚å­˜åŒºï¼ˆç»¿è‰²çŠ¶æ€ï¼‰ï¼Œcommit è¢«æ’¤é”€

# 3. **æ’¤é”€å¤šä¸ª commit**
```bash
# æ’¤é”€æœ€è¿‘ 3 æ¬¡ commitï¼Œä¿ç•™ä¿®æ”¹åˆ°å·¥ä½œåŒº
git reset --soft HEAD~3
```

# 4. **å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æ’¤é”€ï¼ˆå¼ºåˆ¶æ¨é€ï¼‰**
```bash
# 1. æœ¬åœ°æ’¤é”€ commit
git reset --soft HEAD~1

# 2. å¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹ï¼ˆè¦†ç›–å†å²ï¼‰
git push --force origin åˆ†æ”¯å
```
âš ï¸ è­¦å‘Šï¼šä»…é™ä¸ªäººåˆ†æ”¯ä½¿ç”¨ï¼å…¬å…±åˆ†æ”¯æ…ç”¨ï¼Œä¼šè¦†ç›–ä»–äººå†å²è®°å½•

---

# å®Œæ•´å·¥ä½œæµç¤ºä¾‹ï¼š
```bash
# 1. æ„å¤–æäº¤äº†ä¸éœ€è¦çš„ commit
git commit -m "é”™è¯¯çš„æäº¤"

# 2. æ’¤é”€ commit ä½†ä¿ç•™ä»£ç ä¿®æ”¹
git reset --soft HEAD~1

# 3. æŸ¥çœ‹çŠ¶æ€ï¼ˆåº”æ˜¾ç¤ºä¿®æ”¹æ–‡ä»¶æœªæš‚å­˜ï¼‰
git status

# 4. ä¿®æ”¹æ–‡ä»¶åé‡æ–°æäº¤
git add .
git commit -m "æ­£ç¡®çš„æ–°æäº¤"

# 5. æ¨é€åˆ°è¿œç¨‹ï¼ˆå¦‚ä¹‹å‰æœªæ¨é€è¿‡ï¼‰
git push origin main
```

# æ›¿ä»£æ–¹æ¡ˆï¼ˆä¿ç•™å†å²è®°å½•ï¼‰ï¼š
```bash
# ç”¨æ–° commit æ’¤é”€æ—§ commitï¼ˆä¿ç•™å†å²ç—•è¿¹ï¼‰
git revert HEAD
```
- æ•ˆæœï¼šåˆ›å»ºæ–°çš„åå‘ commit æŠµæ¶ˆä¹‹å‰çš„ä¿®æ”¹
- é€‚ç”¨åœºæ™¯ï¼šå…¬å…±åˆ†æ”¯/éœ€è¦ä¿ç•™æ’¤é”€è®°å½•çš„æƒ…å†µ

# é‡è¦æç¤ºï¼š
1. ä½¿ç”¨ `git reflog` å¯æ‰¾å›è¯¯åˆ çš„ commit
2. `--soft` å’Œ `--mixed` çš„åŒºåˆ«ï¼š
   - `--soft`ï¼šä¿®æ”¹ä¿ç•™åœ¨æš‚å­˜åŒºï¼ˆgit add åçš„çŠ¶æ€ï¼‰
   - `--mixed`ï¼ˆé»˜è®¤ï¼‰ï¼šä¿®æ”¹ä¿ç•™åœ¨å·¥ä½œç›®å½•ï¼ˆæœª git add çš„çŠ¶æ€ï¼‰
3. å¼ºåˆ¶æ¨é€å‰ç¡®ä¿ï¼š
   ```bash
   # æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯çŠ¶æ€
   git fetch origin
   git status
   ```

> ğŸ“Œ **æœ€ä½³å®è·µ**ï¼š  
> - æœªæ¨é€çš„ commit â†’ ç”¨ `git reset --soft`  
> - å·²æ¨é€çš„ commit â†’ ç”¨ `git revert`ï¼ˆå®‰å…¨ï¼‰æˆ– `reset + force push`ï¼ˆè°¨æ…ï¼‰  
> - æ“ä½œå‰ç”¨ `git log --oneline` ç¡®è®¤ commit ä½ç½®
> - 




åœ¨ IntelliJ IDEA ä¸­ä½¿ç”¨ Git æ’¤é”€ commit å¹¶ä¿ç•™ä¿®æ”¹çš„å®Œæ•´æ“ä½œæŒ‡å—ï¼š

# ğŸ› ï¸ å›¾å½¢ç•Œé¢æ“ä½œæ­¥éª¤ï¼ˆæ¨èï¼‰

1. **æ‰“å¼€ Git æ—¥å¿—**
   - é¡¶éƒ¨èœå•ï¼š`View â†’ Tool Windows â†’ Git`
   - æˆ–ä½¿ç”¨å¿«æ·é”®ï¼š`Alt+9` (Windows/Linux) / `Command+9` (Mac)

2. **å®šä½è¦æ’¤é”€çš„ commit**
   - åœ¨å·¦ä¾§ "Log" æ ‡ç­¾é¡µä¸­ï¼Œæ‰¾åˆ°è¦æ’¤é”€çš„ commit
   - **å³é”®ç‚¹å‡»** è¯¥ commit â†’ é€‰æ‹© `Undo Commit`

   ![IDEA Undo Commit](https://resources.jetbrains.com/help/img/idea/2023.3/undo_commit.png)

3. **ç¡®è®¤æ’¤é”€æ“ä½œ**
   - ä¿®æ”¹ä¼šè‡ªåŠ¨ä¿ç•™åœ¨å·¥ä½œåŒºï¼ˆæœªæš‚å­˜çŠ¶æ€ï¼‰
   - åœ¨ "Local Changes" æ ‡ç­¾é¡µå¯æŸ¥çœ‹æ‰€æœ‰ä¿ç•™çš„ä¿®æ”¹

4. **ä¿®æ”¹ä»£ç **
   - ç›´æ¥ç¼–è¾‘æ–‡ä»¶ï¼ŒIDEA ä¼šè‡ªåŠ¨æ£€æµ‹å˜æ›´

5. **é‡æ–°æäº¤**
   - åœ¨ "Commit" å·¥å…·çª—å£ï¼ˆ`Ctrl+K`/`Cmd+K`ï¼‰
   - å‹¾é€‰è¦æäº¤çš„æ–‡ä»¶ â†’ å¡«å†™æäº¤ä¿¡æ¯ â†’ ç‚¹å‡» "Commit"

# âŒ¨ï¸ å‘½ä»¤è¡Œæ“ä½œï¼ˆTerminal å†…ï¼‰
```bash
# 1. æ’¤é”€æœ€è¿‘ä¸€æ¬¡ commitï¼ˆä¿ç•™ä¿®æ”¹ï¼‰
git reset --soft HEAD~1

# 2. ä¿®æ”¹ä»£ç ...

# 3. é‡æ–°æ·»åŠ å¹¶æäº¤
git add .  # æˆ–æ·»åŠ ç‰¹å®šæ–‡ä»¶
git commit -m "æ–°çš„æäº¤ä¿¡æ¯"
```

# âš ï¸ ç‰¹æ®Šæƒ…å†µå¤„ç†

**åœºæ™¯1ï¼šå·²æ¨é€åˆ°è¿œç¨‹ä»“åº“**
```bash
# 1. æœ¬åœ°æ’¤é”€
git reset --soft HEAD~1

# 2. ä¿®æ”¹ä»£ç åé‡æ–°æäº¤
git add .
git commit -m "ä¿®æ­£åçš„æäº¤"

# 3. å¼ºåˆ¶æ¨é€ï¼ˆè¦†ç›–è¿œç¨‹ï¼‰
git push --force origin åˆ†æ”¯å
```
> **è­¦å‘Š**ï¼šä»…é™ä¸ªäººåˆ†æ”¯ï¼å›¢é˜Ÿåä½œåˆ†æ”¯ç”¨ `git revert`

**åœºæ™¯2ï¼šæ’¤é”€ç‰¹å®š commitï¼ˆéæœ€è¿‘ï¼‰**
```bash
# 1. æ‰¾åˆ°è¦æ’¤é”€çš„ commit IDï¼ˆgit logæŸ¥çœ‹ï¼‰
git log --oneline

# 2. å›é€€åˆ°è¯¥ commit ä¹‹å‰ï¼ˆä¿ç•™ä¿®æ”¹ï¼‰
git reset --soft <commit-id>
```

# ğŸ”„ æ›¿ä»£æ–¹æ¡ˆï¼šRevert Commitï¼ˆä¿ç•™å†å²è®°å½•ï¼‰
1. å³é”®ç‚¹å‡» commit â†’ `Revert Commit`
2. IDEA ä¼šè‡ªåŠ¨åˆ›å»ºæŠµæ¶ˆä¿®æ”¹çš„æ–° commit
3. é€‚åˆå…¬å…±åˆ†æ”¯ï¼Œé¿å…å¼ºåˆ¶æ¨é€é£é™©

# ğŸ’¡ æœ€ä½³å®è·µæç¤º
1. **æ’¤é”€å‰å¤‡ä»½**ï¼šé‡è¦ä¿®æ”¹å¯å…ˆåˆ›å»ºä¸´æ—¶åˆ†æ”¯
   ```bash
   git branch temp-backup
   ```
2. **ä¿®æ”¹ä¿ç•™ä½ç½®**ï¼š
   - `--soft`ï¼šä¿®æ”¹ä¿ç•™åœ¨æš‚å­˜åŒºï¼ˆç›¸å½“äºå·² `git add`ï¼‰
   - `--mixed`ï¼ˆé»˜è®¤ï¼‰ï¼šä¿®æ”¹ä¿ç•™åœ¨å·¥ä½œç›®å½•ï¼ˆéœ€é‡æ–° `git add`ï¼‰
3. **æ‰¾å›è¯¯åˆ  commit**ï¼š
   - ä½¿ç”¨ `git reflog` æŸ¥çœ‹æ“ä½œå†å²
   - ç”¨ `git reset --hard <ref>` æ¢å¤

### ğŸ“Š æ’¤é”€æ–¹å¼å¯¹æ¯”è¡¨
| **æ–¹æ³•**         | é€‚ç”¨åœºæ™¯                     | æ˜¯å¦ä¿®æ”¹å†å² | é£é™©ç­‰çº§ |
|------------------|----------------------------|-------------|---------|
| `Undo Commit`    | æœ¬åœ°æœªæ¨é€çš„æäº¤             | âœ… ä¿®æ”¹      | â­ ä½    |
| `git reset --soft`| ç²¾ç¡®æ§åˆ¶æ’¤é”€ä½ç½®             | âœ… ä¿®æ”¹      | â­â­ ä¸­  |
| `Revert Commit`  | å·²æ¨é€/å…¬å…±åˆ†æ”¯              | âŒ ä¿ç•™      | â­ ä½    |
| `--force push`   | ä¸ªäººåˆ†æ”¯è¦†ç›–æäº¤             | âœ… ä¿®æ”¹      | â­â­â­ é«˜ |

> æ“ä½œå®Œæˆåï¼Œå¯åœ¨ IDEA å³ä¸‹è§’æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€ï¼Œç¡®ä¿ä»£ç ä¿®æ”¹å®Œæ•´ä¿ç•™ï¼š  
> ![IDEA åˆ†æ”¯çŠ¶æ€](https://resources.jetbrains.com/help/img/idea/2023.3/branch_status.png)
