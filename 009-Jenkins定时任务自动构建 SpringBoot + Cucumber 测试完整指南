# Jenkinså®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ„å»º SpringBoot + Cucumber æµ‹è¯•å®Œæ•´æŒ‡å—

ä¸‹é¢æ˜¯ä¸º SpringBoot + Cucumber è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®è®¾è®¡çš„å®Œæ•´ Jenkins å®šæ—¶æ„å»ºè§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«æ¯æ—¥7-8ç‚¹è‡ªåŠ¨æ„å»ºã€ä»£ç æ‹‰å–ã€æµ‹è¯•æ‰§è¡Œã€æŠ¥å‘Šç”Ÿæˆã€å½’æ¡£å’Œé‚®ä»¶é€šçŸ¥ç­‰åŠŸèƒ½ã€‚

## å®Œæ•´ Jenkinsfile é…ç½®

```groovy
pipeline {
    agent any
    
    // 1. å®šæ—¶ä»»åŠ¡é…ç½® (æ¯å¤©æ—©ä¸Š7:00-8:00éšæœºæ—¶é—´æ‰§è¡Œ)
    triggers {
        cron(timezone: 'Asia/Shanghai', spec: 'H 7-8 * * *')
    }
    
    // ç¯å¢ƒå˜é‡é…ç½®
    environment {
        // é‚®ä»¶æ¥æ”¶äºº (å¤šäººç”¨é€—å·åˆ†éš”)
        EMAIL_RECIPIENTS = 'qa-team@company.com,dev-team@company.com,manager@company.com'
        
        // æŠ¥å‘Šç›®å½•è·¯å¾„
        REPORT_DIR = 'target/cucumber-reports'
        
        // Maven é…ç½®
        MAVEN_OPTS = '-Xmx2048m -XX:MaxPermSize=512m'
    }
    
    // 2. æ„å»ºé€‰é¡¹
    options {
        // ä¿ç•™æœ€è¿‘10æ¬¡æ„å»ºè®°å½•
        buildDiscarder(logRotator(numToKeepStr: '10'))
        
        // è®¾ç½®2å°æ—¶è¶…æ—¶ (é˜²æ­¢æµ‹è¯•å¡æ­»)
        timeout(time: 2, unit: 'HOURS')
        
        // æ·»åŠ æ—¶é—´æˆ³åˆ°æ§åˆ¶å°è¾“å‡º
        timestamps()
    }
    
    stages {
        // 3. æ‹‰å–ä»£ç 
        stage('Checkout Source Code') {
            steps {
                script {
                    echo "ğŸ“¥ å¼€å§‹æ‹‰å–ä»£ç  (åˆ†æ”¯: ${env.GIT_BRANCH})"
                    git branch: 'main', 
                         url: 'https://github.com/your-org/springboot-cucumber-project.git',
                         credentialsId: 'github-credentials'
                }
            }
        }
        
        // 4. æ„å»ºé¡¹ç›®
        stage('Build Project') {
            steps {
                script {
                    echo "ğŸ”¨ æ„å»ºSpringBooté¡¹ç›®..."
                    sh 'mvn clean package -DskipTests'
                }
            }
        }
        
        // 5. æ‰§è¡ŒCucumberæµ‹è¯•
        stage('Run Cucumber Tests') {
            steps {
                script {
                    echo "ğŸš€ æ‰§è¡ŒCucumberè‡ªåŠ¨åŒ–æµ‹è¯•..."
                    // æ‰§è¡Œæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
                    sh 'mvn test -Dcucumber.plugin="html:${REPORT_DIR}/cucumber.html, json:${REPORT_DIR}/cucumber.json"'
                }
            }
            
            post {
                // æµ‹è¯•å¤±è´¥æ—¶ä¿å­˜æ—¥å¿—
                failure {
                    archiveArtifacts artifacts: '**/surefire-reports/*.txt, **/logs/*.log', allowEmptyArchive: true
                }
            }
        }
        
        // 6. ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
        stage('Generate Test Reports') {
            steps {
                script {
                    echo "ğŸ“Š ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š..."
                    // ä½¿ç”¨cucumber-reportingæ’ä»¶ç”Ÿæˆä¸°å¯ŒæŠ¥å‘Š
                    sh 'mvn cucumber:report -Dcucumber.reports.dir=${REPORT_DIR}/generated'
                    
                    // å¤åˆ¶æŠ¥å‘Šåˆ°Jenkinså·¥ä½œç›®å½•
                    sh 'mkdir -p reports && cp -R ${REPORT_DIR}/* reports/'
                }
            }
            
            post {
                always {
                    // å½’æ¡£æµ‹è¯•æŠ¥å‘Š
                    archiveArtifacts artifacts: 'reports/**/*', allowEmptyArchive: true
                }
            }
        }
    }
    
    // 7. åå¤„ç†ä¸é€šçŸ¥
    post {
        always {
            script {
                // è®¡ç®—æµ‹è¯•é€šè¿‡ç‡
                def testResult = cucumber jsonReportDirectory: 'reports'
                def passed = testResult.passed.size()
                def failed = testResult.failed.size()
                def skipped = testResult.skipped.size()
                def total = passed + failed + skipped
                def passRate = total > 0 ? Math.round((passed / total) * 100) : 0
                
                // æ„å»ºæ—¶é—´ä¿¡æ¯
                def buildTime = new Date(currentBuild.startTimeInMillis)
                def timeRange = buildTime.format("yyyy-MM-dd HH:mm", TimeZone.getTimeZone('Asia/Shanghai'))
                
                // é‚®ä»¶å†…å®¹æ¨¡æ¿
                def emailBody = """
                | ===================== è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š =====================
                | 
                | **é¡¹ç›®åç§°**: ${env.JOB_NAME}
                | **æ„å»ºç¼–å·**: #${env.BUILD_NUMBER}
                | **æ‰§è¡Œæ—¶é—´**: ${timeRange}
                | **æŒç»­æ—¶é—´**: ${currentBuild.durationString.replace(' and counting', '')}
                | **æµ‹è¯•ç»“æœ**: ${currentBuild.currentResult}
                | 
                | ğŸ“Š æµ‹è¯•ç»Ÿè®¡:
                |    âœ… é€šè¿‡: ${passed} 
                |    âŒ å¤±è´¥: ${failed}
                |    â­ï¸ è·³è¿‡: ${skipped}
                |    ğŸ¯ æ€»è®¡: ${total}
                |    ğŸ“ˆ é€šè¿‡ç‡: ${passRate}%
                | 
                | ğŸ”— è®¿é—®é“¾æ¥:
                |    - æ§åˆ¶å°æ—¥å¿—: ${env.BUILD_URL}console
                |    - HTMLæŠ¥å‘Š: ${env.BUILD_URL}artifact/reports/cucumber.html
                |    - è¯¦ç»†æŠ¥å‘Š: ${env.BUILD_URL}artifact/reports/generated/cucumber-html-reports/overview-features.html
                | 
                | ========================================================
                """.stripMargin()
                
                // ä¿å­˜é‚®ä»¶å†…å®¹ä¾›åç»­ä½¿ç”¨
                env.EMAIL_CONTENT = emailBody
            }
            
            // å‘å¸ƒCucumberæŠ¥å‘Š
            cucumber reportTitle: 'Cucumber Test Report',
                     jsonReportDirectory: 'reports',
                     fileIncludePattern: '**/*.json',
                     trendsLimit: 10
        }
        
        // æ„å»ºæˆåŠŸæ—¶å‘é€é€šçŸ¥
        success {
            script {
                echo "âœ… æµ‹è¯•é€šè¿‡ï¼Œå‘é€é€šçŸ¥é‚®ä»¶..."
                emailext to: env.EMAIL_RECIPIENTS,
                         subject: "âœ… SUCCESS: SpringBootæµ‹è¯•é€šè¿‡ - ${env.JOB_NAME} #${env.BUILD_NUMBER}",
                         body: env.EMAIL_CONTENT
            }
        }
        
        // æ„å»ºå¤±è´¥æ—¶å‘é€é€šçŸ¥
        failure {
            script {
                echo "âŒ æµ‹è¯•å¤±è´¥ï¼Œå‘é€å‘Šè­¦é‚®ä»¶..."
                emailext to: env.EMAIL_RECIPIENTS,
                         subject: "âŒ FAILED: SpringBootæµ‹è¯•å¤±è´¥ - ${env.JOB_NAME} #${env.BUILD_NUMBER}",
                         body: env.EMAIL_CONTENT,
                         attachLog: true,
                         attachmentsPattern: 'reports/**/*.html'
            }
        }
        
        // æµ‹è¯•ä¸ç¨³å®šæ—¶å‘é€é€šçŸ¥
        unstable {
            script {
                echo "âš ï¸ æµ‹è¯•ä¸ç¨³å®šï¼Œå‘é€é€šçŸ¥..."
                emailext to: env.EMAIL_RECIPIENTS,
                         subject: "âš ï¸ UNSTABLE: SpringBootæµ‹è¯•ä¸ç¨³å®š - ${env.JOB_NAME} #${env.BUILD_NUMBER}",
                         body: env.EMAIL_CONTENT,
                         attachmentsPattern: 'reports/**/*.html'
            }
        }
    }
}
```

## æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. å®šæ—¶æ„å»ºé…ç½®
```groovy
triggers {
    cron(timezone: 'Asia/Shanghai', spec: 'H 7-8 * * *')
}
```
- **H 7-8**ï¼šåœ¨7:00-8:59ä¹‹é—´éšæœºæ—¶é—´æ‰§è¡Œï¼ˆJenkinsè‡ªåŠ¨åˆ†é…ï¼‰
- **timezone**ï¼šæŒ‡å®šæ—¶åŒºä¸ºäºšæ´²/ä¸Šæµ·ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰
- **æ‰§è¡Œé¢‘ç‡**ï¼šæ¯å¤©æ‰§è¡Œï¼ˆæ— æ—¥æœŸé™åˆ¶ï¼‰

### 2. Cucumber æµ‹è¯•æ‰§è¡Œ
```groovy
sh 'mvn test -Dcucumber.plugin="html:${REPORT_DIR}/cucumber.html, json:${REPORT_DIR}/cucumber.json"'
```
- ä½¿ç”¨ Maven æ‰§è¡Œæµ‹è¯•
- ç”Ÿæˆ HTML å’Œ JSON æ ¼å¼æŠ¥å‘Š
- é€šè¿‡ `cucumber.filter.tags` å‚æ•°å¯æŒ‡å®šæµ‹è¯•æ ‡ç­¾ï¼ˆå¦‚ `@smoke`ï¼‰

### 3. æµ‹è¯•æŠ¥å‘Šå¤„ç†
```groovy
// ç”Ÿæˆå¢å¼ºæŠ¥å‘Š
sh 'mvn cucumber:report -Dcucumber.reports.dir=${REPORT_DIR}/generated'

// å½’æ¡£æŠ¥å‘Š
archiveArtifacts artifacts: 'reports/**/*', allowEmptyArchive: true

// å‘å¸ƒæŠ¥å‘Š
cucumber reportTitle: 'Cucumber Test Report',
         jsonReportDirectory: 'reports',
         fileIncludePattern: '**/*.json'
```

### 4. é‚®ä»¶é€šçŸ¥ç³»ç»Ÿ
```groovy
emailext to: env.EMAIL_RECIPIENTS,
         subject: "âœ… SUCCESS: ...",
         body: env.EMAIL_CONTENT,
         attachLog: true,
         attachmentsPattern: 'reports/**/*.html'
```
- å¤šäººæ¥æ”¶ï¼ˆé€—å·åˆ†éš”ï¼‰
- åŒ…å«æµ‹è¯•ç»Ÿè®¡ï¼ˆé€šè¿‡ç‡ã€å¤±è´¥æ•°ç­‰ï¼‰
- å¤±è´¥æ—¶é™„åŠ æ—¥å¿—å’ŒæŠ¥å‘Š
- æä¾›ç›´æ¥è®¿é—®é“¾æ¥

## å¿…è¦ Jenkins æ’ä»¶

1. **Pipeline ç›¸å…³**:
   - Pipeline
   - Pipeline: Maven Integration
   - Pipeline: GitHub Plugin

2. **æµ‹è¯•æŠ¥å‘Š**:
   - Cucumber Reports Plugin
   - JUnit Plugin

3. **é€šçŸ¥ç³»ç»Ÿ**:
   - Email Extension Plugin
   - Mailer Plugin

4. **å…¶ä»–å·¥å…·**:
   - Timestamper
   - Build Timeout
   - Workspace Cleanup

## å®‰è£…ä¸é…ç½®æ­¥éª¤

### 1. å®‰è£…æ‰€éœ€æ’ä»¶
1. è¿›å…¥ **Jenkins > ç³»ç»Ÿç®¡ç† > æ’ä»¶ç®¡ç†**
2. åœ¨ **å¯é€‰æ’ä»¶** æ ‡ç­¾é¡µæœç´¢å¹¶å®‰è£…ä¸Šè¿°æ’ä»¶
3. é‡å¯ Jenkins ç”Ÿæ•ˆ

### 2. é…ç½®é‚®ä»¶æœåŠ¡å™¨
1. è¿›å…¥ **ç³»ç»Ÿç®¡ç† > ç³»ç»Ÿé…ç½®**
2. æ‰¾åˆ° **é‚®ä»¶é€šçŸ¥** éƒ¨åˆ†ï¼š
   - SMTP æœåŠ¡å™¨ï¼šsmtp.your-company.com
   - é»˜è®¤ç”¨æˆ·é‚®ç®±åç¼€ï¼š@your-company.com
   - å‹¾é€‰ **ä½¿ç”¨SMTPè®¤è¯**
   - å¡«å†™ç”¨æˆ·å/å¯†ç 
3. æµ‹è¯•é‚®ä»¶é…ç½®

### 3. é…ç½®å…¨å±€å·¥å…·
1. è¿›å…¥ **ç³»ç»Ÿç®¡ç† > å…¨å±€å·¥å…·é…ç½®**
2. é…ç½® JDKï¼š
   - åˆ«åï¼šJDK11
   - JAVA_HOMEï¼š/usr/lib/jvm/java-11-openjdk
3. é…ç½® Mavenï¼š
   - åˆ«åï¼šMaven 3.8.6
   - MAVEN_HOMEï¼š/opt/maven

### 4. åˆ›å»º Pipeline ä»»åŠ¡
1. æ–°å»ºä»»åŠ¡ > é€‰æ‹© **æµæ°´çº¿**
2. åœ¨ **Pipeline** éƒ¨åˆ†ï¼š
   - å®šä¹‰ï¼šPipeline script from SCM
   - SCMï¼šGit
   - ä»“åº“ URLï¼šhttps://github.com/your-org/springboot-cucumber-project.git
   - å‡­æ®ï¼šæ·»åŠ  GitHub è®¿é—®å‡­è¯
   - è„šæœ¬è·¯å¾„ï¼šJenkinsfile (ä¿æŒé»˜è®¤)

## é«˜çº§é…ç½®æŠ€å·§

### 1. å¤šåˆ†æ”¯æ”¯æŒ
```groovy
triggers {
    // ä»…mainåˆ†æ”¯å¯ç”¨å®šæ—¶æ„å»º
    cron(env.BRANCH_NAME == 'main' ? 'H 7-8 * * *' : '')
}
```

### 2. å‚æ•°åŒ–æ„å»º
```groovy
parameters {
    choice(name: 'TEST_TAGS', choices: '@smoke\n@regression\n@all', description: 'æµ‹è¯•èŒƒå›´')
    string(name: 'MAVEN_GOALS', defaultValue: 'test', description: 'Mavenæ‰§è¡Œç›®æ ‡')
}

stages {
    stage('Run Tests') {
        steps {
            sh "mvn ${params.MAVEN_GOALS} -Dcucumber.filter.tags=\"${params.TEST_TAGS}\""
        }
    }
}
```

### 3. æµ‹è¯•å¤±è´¥é‡è¯•
```groovy
stage('Run Flaky Tests') {
    steps {
        retry(3) {
            sh 'mvn test -Dcucumber.filter.tags="@flaky"'
        }
    }
}
```

### 4. èµ„æºæ¸…ç†
```groovy
post {
    always {
        // æ¸…ç†å·¥ä½œç©ºé—´
        cleanWs()
        
        // æ¸…ç†Mavenæœ¬åœ°ä»“åº“ç¼“å­˜
        sh 'mvn dependency:purge-local-repository -DactTransitively=false'
    }
}
```

## æŠ¥å‘Šæ•ˆæœé¢„è§ˆ

### é‚®ä»¶å†…å®¹ç¤ºä¾‹
```
===================== è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š =====================

**é¡¹ç›®åç§°**: SpringBoot-Daily-Test
**æ„å»ºç¼–å·**: #42
**æ‰§è¡Œæ—¶é—´**: 2025-07-15 07:38
**æŒç»­æ—¶é—´**: 15 min 23 sec
**æµ‹è¯•ç»“æœ**: SUCCESS

ğŸ“Š æµ‹è¯•ç»Ÿè®¡:
   âœ… é€šè¿‡: 158 
   âŒ å¤±è´¥: 0
   â­ï¸ è·³è¿‡: 2
   ğŸ¯ æ€»è®¡: 160
   ğŸ“ˆ é€šè¿‡ç‡: 99%

ğŸ”— è®¿é—®é“¾æ¥:
   - æ§åˆ¶å°æ—¥å¿—: https://jenkins.example.com/job/SpringBoot-Daily-Test/42/console
   - HTMLæŠ¥å‘Š: https://jenkins.example.com/job/SpringBoot-Daily-Test/42/artifact/reports/cucumber.html
   - è¯¦ç»†æŠ¥å‘Š: https://jenkins.example.com/job/SpringBoot-Daily-Test/42/artifact/reports/generated/cucumber-html-reports/overview-features.html
```

### Jenkins æŠ¥å‘Šé¢æ¿
1. **Cucumber æŠ¥å‘Š**ï¼š
   - åŠŸèƒ½æ¦‚è§ˆ
   - åœºæ™¯é€šè¿‡ç‡
   - æ­¥éª¤æ‰§è¡Œæ—¶é—´
   - å¤±è´¥æµ‹è¯•å †æ ˆè·Ÿè¸ª

2. **è¶‹åŠ¿åˆ†æ**ï¼š
   - å†å²é€šè¿‡ç‡å˜åŒ–
   - å¤±è´¥æµ‹è¯•è¶‹åŠ¿
   - æ‰§è¡Œæ—¶é—´å˜åŒ–

## æ•…éšœæ’æŸ¥æŒ‡å—

### å®šæ—¶ä»»åŠ¡æœªæ‰§è¡Œ
1. æ£€æŸ¥ Jenkins ç³»ç»Ÿæ—¶é—´ï¼š`ç³»ç»Ÿç®¡ç† > ç³»ç»Ÿä¿¡æ¯`
2. æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡æ—¥å¿—ï¼š`ç³»ç»Ÿç®¡ç† > ç³»ç»Ÿæ—¥å¿— > æ—¥å¿—çº§åˆ«`
   - æ·»åŠ  Loggerï¼š`hudson.triggers.Timer` (çº§åˆ«è®¾ä¸º ALL)
3. ç¡®è®¤ä»»åŠ¡é…ç½®ï¼š`ä»»åŠ¡ > é…ç½® > è§¦å‘å™¨`

### æµ‹è¯•æŠ¥å‘Šæœªç”Ÿæˆ
1. æ£€æŸ¥ Cucumber æ’ä»¶é…ç½®ï¼š
   ```java
   // pom.xml ç¡®ä¿åŒ…å«æŠ¥å‘Šæ’ä»¶
   <dependency>
       <groupId>io.cucumber</groupId>
       <artifactId>cucumber-reporting</artifactId>
       <version>5.7.6</version>
   </dependency>
   ```
2. éªŒè¯æŠ¥å‘Šè·¯å¾„ï¼š`target/cucumber-reports`
3. æ£€æŸ¥æ–‡ä»¶æƒé™ï¼š`sh 'ls -la target/cucumber-reports'`

### é‚®ä»¶å‘é€å¤±è´¥
1. æµ‹è¯•é‚®ä»¶é…ç½®ï¼š`ç³»ç»Ÿç®¡ç† > ç³»ç»Ÿé…ç½® > Extended E-mail Notification`
2. æ£€æŸ¥ SMTP ç«¯å£ï¼ˆé€šå¸¸ 587 æˆ– 465ï¼‰
3. æŸ¥çœ‹é‚®ä»¶æ—¥å¿—ï¼š`${JENKINS_HOME}/logs/mailer.log`

æ­¤è§£å†³æ–¹æ¡ˆä¸º SpringBoot + Cucumber é¡¹ç›®æä¾›äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Œæ¯å¤©æ—©æ™¨è‡ªåŠ¨æ‰§è¡Œæµ‹è¯•å¹¶åŠæ—¶é€šçŸ¥å›¢é˜Ÿç»“æœï¼Œç¡®ä¿äº§å“è´¨é‡æŒç»­å¯æ§ã€‚

===================================================================================================================================================
ä¸‹é¢ä¸ºä½ æä¾›ä¸€ä¸ªåŸºäºJenkins Pipelineçš„ Groovy è„šæœ¬ï¼Œå®ƒèƒ½å®ç°ä¸ä¸Šè¿°æ­¥éª¤ç›¸åŒçš„åŠŸèƒ½ï¼Œæ¶µç›–å®šæ—¶æ„å»ºã€æ‹‰å–ä»£ç ã€Maven æµ‹è¯•ã€ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€å½’æ¡£æŠ¥å‘Šä»¥åŠé‚®ä»¶é€šçŸ¥ç­‰ã€‚

```groovy
pipeline {
    agent any
    triggers {
        // æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œæ„å»º
        cron('0 2 * * *')
    }
    stages {
        stage('æ‹‰å–ä»£ç ') {
            steps {
                // ä»Gitä»“åº“æ‹‰å–ä»£ç 
                git url: 'https://github.com/yourusername/your-repo.git', credentialsId: 'your-credentials-id'
            }
        }
        stage('Mavenæµ‹è¯•') {
            steps {
                // ä½¿ç”¨Mavenè¿›è¡Œæ¸…ç†å’Œæµ‹è¯•
                sh 'mvn clean test'
            }
        }
    }
    post {
        success {
            // æ„å»ºæˆåŠŸåæ‰§è¡Œçš„æ“ä½œ
            steps {
                junit 'target/surefire-reports/*.xml'
                archiveArtifacts artifacts: 'target/surefire-reports/*'
                emailext (
                    subject: '[Jenkins] ${PROJECT_NAME} - Build #${BUILD_NUMBER} - SUCCESS!',
                    body: '<p>é¡¹ç›® ${PROJECT_NAME} çš„æ„å»º #${BUILD_NUMBER} å·²æˆåŠŸå®Œæˆã€‚</p><p>è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ï¼š<a href="${BUILD_URL}">${BUILD_URL}</a></p>',
                    to: 'recipient@example.com'
                )
            }
        }
        failure {
            // æ„å»ºå¤±è´¥åæ‰§è¡Œçš„æ“ä½œ
            steps {
                junit 'target/surefire-reports/*.xml'
                archiveArtifacts artifacts: 'target/surefire-reports/*'
                emailext (
                    subject: '[Jenkins] ${PROJECT_NAME} - Build #${BUILD_NUMBER} - FAILURE!',
                    body: '<p>é¡¹ç›® ${PROJECT_NAME} çš„æ„å»º #${BUILD_NUMBER} å¤±è´¥äº†ã€‚</p><p>è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ï¼š<a href="${BUILD_URL}">${BUILD_URL}</a></p>',
                    to: 'recipient@example.com'
                )
            }
        }
    }
}
```

### ä»£ç è¯´æ˜ï¼š
1. **pipeline éƒ¨åˆ†**ï¼šå®šä¹‰äº†æ•´ä¸ª Jenkins Pipeline çš„ç»“æ„ã€‚
    - `agent any`ï¼šè¡¨ç¤ºè¯¥ Pipeline å¯ä»¥åœ¨ä»»æ„å¯ç”¨çš„ä»£ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚
    - `triggers`ï¼šä½¿ç”¨ `cron` è¡¨è¾¾å¼è®¾å®šå®šæ—¶æ„å»ºï¼Œè¿™é‡Œè®¾ç½®ä¸ºæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œã€‚
2. **stages éƒ¨åˆ†**ï¼š
    - `æ‹‰å–ä»£ç `ï¼šä½¿ç”¨ `git` æ­¥éª¤ä»æŒ‡å®šçš„ Git ä»“åº“æ‹‰å–ä»£ç ï¼Œ`credentialsId` éœ€è¦æ›¿æ¢ä¸ºä½ åœ¨ Jenkins ä¸­é…ç½®çš„å‡­è¯ IDã€‚
    - `Mavenæµ‹è¯•`ï¼šä½¿ç”¨ `sh` æ­¥éª¤æ‰§è¡Œ `mvn clean test` å‘½ä»¤è¿›è¡Œé¡¹ç›®çš„æ¸…ç†å’Œæµ‹è¯•ã€‚
3. **post éƒ¨åˆ†**ï¼š
    - `success`ï¼šå½“æ„å»ºæˆåŠŸæ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
        - `junit`ï¼šå‘å¸ƒ JUnit æµ‹è¯•æŠ¥å‘Šï¼Œè·¯å¾„ä¸º `target/surefire-reports/*.xml`ã€‚
        - `archiveArtifacts`ï¼šå½’æ¡£æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶ã€‚
        - `emailext`ï¼šå‘é€æˆåŠŸé€šçŸ¥é‚®ä»¶ï¼ŒåŒ…å«é¡¹ç›®åç§°ã€æ„å»ºç¼–å·å’Œæ„å»ºçŠ¶æ€ï¼Œå¹¶æä¾›æ„å»ºè¯¦æƒ…çš„é“¾æ¥ã€‚
    - `failure`ï¼šå½“æ„å»ºå¤±è´¥æ—¶ï¼Œæ‰§è¡Œä¸æˆåŠŸæ—¶ç±»ä¼¼çš„æ“ä½œï¼Œä½†é‚®ä»¶ä¸»é¢˜å’Œå†…å®¹ä¼šè¡¨æ˜æ„å»ºå¤±è´¥ã€‚

### ä½¿ç”¨æ–¹æ³•ï¼š
1. åœ¨ Jenkins ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Pipeline é¡¹ç›®ã€‚
2. åœ¨ Pipeline é…ç½®ä¸­ï¼Œé€‰æ‹©â€œPipeline scriptâ€ï¼Œå¹¶å°†ä¸Šè¿° Groovy ä»£ç å¤åˆ¶ç²˜è´´åˆ°æ–‡æœ¬æ¡†ä¸­ã€‚
3. æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ Git ä»“åº“ URLã€å‡­è¯ ID å’Œæ”¶ä»¶äººé‚®ç®±åœ°å€ã€‚
4. ä¿å­˜é…ç½®å¹¶æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡æ„å»ºï¼ŒéªŒè¯è„šæœ¬æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

é€šè¿‡ä¸Šè¿° Groovy è„šæœ¬ï¼Œä½ å¯ä»¥åˆ©ç”¨ Jenkins Pipeline å®ç° Spring Boot + Cucumber è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®çš„å®šæ—¶è‡ªåŠ¨æ„å»ºå’Œç›¸å…³æ“ä½œã€‚ 
